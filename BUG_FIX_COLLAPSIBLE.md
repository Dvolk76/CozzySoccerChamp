# Исправление бага с обрезанием матчей

## Проблема
При разворачивании дня матча и затем разворачивании ставок игроков внутри матча, нижний матч обрезался и не был виден.

## Причина
Компонент `Collapsible` не всегда корректно пересчитывал высоту при изменении содержимого вложенных элементов. CSS также имел `overflow: hidden` на секции ставок, что могло приводить к обрезанию контента.

## Исправления

### 1. Улучшен компонент Collapsible.tsx
- Добавлено более умное отслеживание изменений размера вложенных элементов
- `ResizeObserver` теперь отслеживает не только основной контейнер, но и ключевые вложенные элементы (`.bets-section`, `.match-card`, `.bets-table-wrapper`)
- При изменении размера контента высота автоматически пересчитывается с плавной анимацией

### 2. Обновлены CSS стили (index.css)

#### `.bets-section`
```css
.bets-section {
  overflow: visible;  /* было: overflow: hidden */
  position: relative;
  z-index: 1;
}
```

#### `.match-group-content` и `.match-day-content`
```css
.match-group-content,
.match-day-content {
  overflow: visible;  /* добавлено для естественного расширения контента */
}
```

## Результат
Теперь при разворачивании ставок игроков:
- Родительские контейнеры автоматически расширяются
- Нижние матчи остаются видимыми
- Анимация разворачивания работает плавно
- Нет обрезания контента

## Дополнительное исправление (687fe1e)

### Проблема с дерганием
После первого исправления появилась проблема: при сворачивании дней матчей разделы туров снизу начинали дергаться.

### Причина
`ResizeObserver` срабатывал слишком часто и постоянно переключал высоту между pixel и auto, что вызывало визуальные артефакты.

### Решение
- Добавлен **debounce** (50мс) для предотвращения множественных срабатываний
- Высота обновляется только при **значимых изменениях** (более 10px)
- Убраны постоянные переключения между pixel height и auto
- Наблюдение только за основным контейнером (не за всеми вложенными элементами)

## Тестирование
1. Разверните группу матчей
2. Разверните день матча
3. Кликните на "Ставки игроков" в любом матче
4. Проверьте, что нижние матчи видны и не обрезаются
5. Сверните день матча
6. Проверьте, что туры снизу не дергаются

