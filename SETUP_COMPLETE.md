# ‚úÖ –°–∏—Å—Ç–µ–º–∞ –±–µ–∫–∞–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞!

## üéâ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–µ–∫–∞–ø
- **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:00 UTC (06:00 –ú–°–ö)
- **–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω
- **URL:** https://cozy-soccer-champ.cozzy-soccer.workers.dev
- **Cron:** `0 3 * * *`

### ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π –±–µ–∫–∞–ø —á–µ—Ä–µ–∑ CLI
- **–ö–æ–º–∞–Ω–¥–∞:** `npm run backup`
- **–¢–µ—Å—Ç–æ–≤—ã–π –±–µ–∫–∞–ø —Å–æ–∑–¥–∞–Ω:** `backup-2025-10-06T15-36-34-265Z.json` (4.20 KB)
- **–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ:** 3 –º–∞—Ç—á–∞ + —Å—Ö–µ–º–∞ –ë–î

### ‚úÖ API –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –±–µ–∫–∞–ø–∞
- `POST /api/backup/create` - —Å–æ–∑–¥–∞—Ç—å –±–µ–∫–∞–ø (–∞–¥–º–∏–Ω)
- `GET /api/backup/list` - —Å–ø–∏—Å–æ–∫ –±–µ–∫–∞–ø–æ–≤ (–∞–¥–º–∏–Ω)  
- `POST /api/backup/restore` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–∞–¥–º–∏–Ω)

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å (2 –º–∏–Ω—É—Ç—ã):

### 1Ô∏è‚É£ –í–∫–ª—é—á–∏—Ç—å R2 –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–µ–∫–∞–ø–æ–≤ –≤ –æ–±–ª–∞–∫–µ

**–®–∞–≥ 1:** –û—Ç–∫—Ä–æ–π—Ç–µ Cloudflare Dashboard:
```
https://dash.cloudflare.com/
‚Üí R2 Object Storage (–≤ –ª–µ–≤–æ–º –º–µ–Ω—é)
‚Üí –ù–∞–∂–º–∏—Ç–µ "Purchase R2" –∏–ª–∏ "Enable R2"
```

**–®–∞–≥ 2:** –°–æ–∑–¥–∞–π—Ç–µ bucket:
```bash
npm run r2:create
```

**–®–∞–≥ 3:** –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `wrangler.toml` (—Å—Ç—Ä–æ–∫–∏ 42-44):
```toml
[[r2_buckets]]
binding = "BACKUP_BUCKET"
bucket_name = "cozy-soccer-backups"
```

**–®–∞–≥ 4:** –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ:
```bash
npm run build
npm run deploy
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –ë–µ–∫–∞–ø—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ R2.

---

### 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–®–∞–≥ 1:** –ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à Chat ID:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ **–ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** –≤–∞—à–µ–º—É –±–æ—Ç—É
   
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `<BOT_TOKEN>` –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω):
   ```
   https://api.telegram.org/bot<BOT_TOKEN>/getUpdates
   ```
   
3. –ù–∞–π–¥–∏—Ç–µ –≤ JSON –æ—Ç–≤–µ—Ç–µ: `"chat":{"id":123456789}`
   
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789`)

**–®–∞–≥ 2:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç:
```bash
wrangler secret put TELEGRAM_ADMIN_CHAT_ID
# –í–≤–µ–¥–∏—Ç–µ –≤–∞—à chat ID (—á–∏—Å–ª–æ)
```

**–®–∞–≥ 3:** –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π—Ç–µ:
```bash
npm run deploy
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –±–µ–∫–∞–ø–∞—Ö.

**–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```
‚úÖ Database Backup Successful

üìÖ Time: 2025-10-06T03:00:00.000Z
üìä Tables: User, Match, Prediction, PredictionHistory, Score
üíæ Size: 15.08 KB
üìç Location: r2://backup-2025-10-06T03-00-00-000Z.json
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cron –ª–æ–≥–∏:
```bash
wrangler tail
# –ñ–¥–∏—Ç–µ 03:00 UTC –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∞
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å R2 buckets (–ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏):
```bash
npm run r2:list
```

### –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –±–µ–∫–∞–ø –≤—Ä—É—á–Ω—É—é:
```bash
npm run backup
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±–µ–∫–∞–ø–∞:
```bash
npm run backup:restore -- --input backup-2025-10-06T15-36-34-265Z.json
```

---

## üìä –°—Ç–∞—Ç—É—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| ‚úÖ Cron —Ç—Ä–∏–≥–≥–µ—Ä | –†–∞–±–æ—Ç–∞–µ—Ç | –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:00 UTC |
| ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π –±–µ–∫–∞–ø | –†–∞–±–æ—Ç–∞–µ—Ç | `npm run backup` |
| ‚úÖ API endpoints | –†–∞–±–æ—Ç–∞—é—Ç | –î–ª—è –∞–¥–º–∏–Ω–æ–≤ |
| ‚è≥ R2 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ | –û–∂–∏–¥–∞–µ—Ç | –ù—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –≤ Dashboard |
| ‚è≥ Telegram | –û–∂–∏–¥–∞–µ—Ç | –ù—É–∂–µ–Ω chat ID |

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ë–µ–∫–∞–ø
npm run backup                          # –°–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –±–µ–∫–∞–ø
npm run backup:restore                  # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞

# R2
npm run r2:create                       # –°–æ–∑–¥–∞—Ç—å bucket
npm run r2:list                         # –°–ø–∏—Å–æ–∫ buckets

# –î–µ–ø–ª–æ–π
npm run build                           # –°–æ–±—Ä–∞—Ç—å TypeScript
npm run deploy                          # –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å worker

# –õ–æ–≥–∏
wrangler tail                           # –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```

---

## üîó –†–µ—Å—É—Ä—Å—ã:

- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** `BACKUP_QUICKSTART.md`
- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `BACKUP_SYSTEM.md`
- **–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤:** `.backup-files-created.txt`

---

## üÜò –ü–æ–º–æ—â—å:

### R2 –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è?
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–æ—à–ª–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç Cloudflare
- R2 –±–µ—Å–ø–ª–∞—Ç–µ–Ω –¥–æ 10GB
- –ü–µ—Ä–≤–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –ø–∞—Ä—É –º–∏–Ω—É—Ç

### Telegram –Ω–µ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è?
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ —Å–µ–∫—Ä–µ—Ç
wrangler secret list

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç
# (–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É /start)
```

### Cron –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
wrangler tail

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ worker –∑–∞–¥–µ–ø–ª–æ–µ–Ω
npm run deploy
```

---

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞–≤—Ç–æ–±–µ–∫–∞–ø—ã –≤–∫–ª—é—á–µ–Ω—ã
2. ‚è≥ –í–∫–ª—é—á–∏—Ç–µ R2 –≤ Cloudflare Dashboard
3. ‚è≥ –î–æ–±–∞–≤—å—Ç–µ Telegram chat ID

**–£–∂–µ –º–æ–∂–Ω–æ:**
- –î–µ–ª–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –±–µ–∫–∞–ø—ã: `npm run backup`
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–æ–≤: `npm run backup:restore`
- –ë–µ–∫–∞–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ 03:00 UTC

---

*–°–æ–∑–¥–∞–Ω–æ: 6 –æ–∫—Ç—è–±—Ä—è 2025*  
*–ü–µ—Ä–≤—ã–π –∞–≤—Ç–æ–±–µ–∫–∞–ø: –ó–∞–≤—Ç—Ä–∞ –≤ 03:00 UTC (06:00 –ú–°–ö)*

